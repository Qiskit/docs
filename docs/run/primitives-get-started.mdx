---
title: Get started with primitives
description: Use Qiskit Runtime Estimator and Sampler

---

# Get started with primitives

The steps in this topic describes how to set up  primitives, explore the options you can use to configure them, then invoke them in a program.

<Admonition type="note" title="Important:">
To ensure faster and more efficient results, as of 1 March 2024, circuits and observables need to be transformed to only use instructions supported by the system (referred to as *instruction set architecture (ISA)* circuits and observables) before being submitted to the Qiskit Runtime primitives.  See the [transpilation documentation](../transpile) for instructions to transform circuits.  Due to this change, the primitives will no longer perform layout or routing operations, consequently transpilation options referring to those tasks will no longer have any effect. Users may still request that the Primitives do no optimization of input circuits via `options.transpilation.skip_transpilation`.
</Admonition>

<Admonition type="note">
    These examples all use the primitives from Qiskit Runtime, but you could use the base primitives instead. 
</Admonition>

<span id="start-estimator"></span>
## Get started with Estimator

### 1. Initialize the account

Because Qiskit Runtime `Estimator` is a managed service, you first need to initialize your account. You can then select the simulator or real system you want to use to calculate the expectation value.

Follow the steps in the [Install and set up topic](../start/install) if you don't already have an account.

```python
from qiskit_ibm_runtime import QiskitRuntimeService

service = QiskitRuntimeService()
backend = service.backend("ibm_brisbane")
```

### 2. Create a circuit and an observable

You need at least one circuit and one observable as inputs to the `Estimator` primitive.

<Tabs>
  <TabItem value="EstimatorV2" label="EstimatorV2">
    For EstimatorV2, the circuit, observable, and optional paramater value sets are input as *primitive unified bloc* (PUB) tuples. 

    NEEDS UPDATED CODE.

    ```python
    import numpy as np
    from qiskit.circuit.library import IQP
    from qiskit.transpiler.preset_passmanagers import generate_preset_pass_manager
    from qiskit.quantum_info import SparsePauliOp, random_hermitian

    n_qubits = 127

    mat = np.real(random_hermitian(n_qubits, seed=1234))
    circuit = IQP(mat)
    observable = SparsePauliOp("Z" * n_qubits)
    print(f">>> Observable: {observable.paulis}")
    ```
    The circuit and observable need to be transformed to only use instructions supported by the system (referred to as *instruction set architecture (ISA)* circuits). We'll use the transpiler to do this.

    ```python
    pm = generate_preset_pass_manager(backend=backend)
    isa_circuit = pm.run(circuit)
    isa_observable = observable.apply_layout(isa_circuit.layout)
    ```
  </TabItem>

  <TabItem value="EstimatorV1" label="Estimator (V1)">
    ```python
    import numpy as np
    from qiskit.circuit.library import IQP
    from qiskit.transpiler.preset_passmanagers import generate_preset_pass_manager
    from qiskit.quantum_info import SparsePauliOp, random_hermitian

    n_qubits = 127

    mat = np.real(random_hermitian(n_qubits, seed=1234))
    circuit = IQP(mat)
    observable = SparsePauliOp("Z" * n_qubits)
    print(f">>> Observable: {observable.paulis}")
    ```
    The circuit and observable need to be transformed to only use instructions supported by the system (referred to as *instruction set architecture (ISA)* circuits). We'll use the transpiler to do this.

    ```python
    pm = generate_preset_pass_manager(backend=backend)
    isa_circuit = pm.run(circuit)
    isa_observable = observable.apply_layout(isa_circuit.layout)
    ```
  </TabItem>
</Tabs>

### 3. Initialize Qiskit Runtime Estimator

We want to use the Qiskit Runtime `Estimator`, so we initialize an instance of `qiskit_ibm_runtime.Estimator` instead of `qiskit.primitives.Estimator`. 

When you initialize the `Estimator`, you must pass in the system or simulator you previously selected as the target device (or simulator).  You could also do this within the `session` parameter. 


<Tabs>
  <TabItem value="EstimatorV2" label="EstimatorV2">
    When using EstimatorV2, for backward compatibility, you must explicitly import EstimatorV2. After V1 support ends, you can use either `import` command (`from qiskit_ibm_runtime import Estimator` or `from qiskit_ibm_runtime import EstimatorV2`) to import EstimatorV2. 

    ```python
    from qiskit_ibm_runtime import EstimatorV2 as Estimator

    estimator = Estimator(backend=backend)
    ```
  </TabItem>

  <TabItem value="EstimatorV1" label="Estimator (V1)">
    ```python
    from qiskit_ibm_runtime import Estimator

    estimator = Estimator(backend=backend)
    ```
  </TabItem>
</Tabs>


### 4. Invoke the Estimator and get results

Next, invoke the `run()` method to calculate expectation values for the input circuits and observables.

<Tabs>
  <TabItem value="EstimatorV2" label="EstimatorV2">
    NEED TO VERIFY CODE

  ```python
job = estimator.run(isa_circuit, isa_observable)
print(f">>> Job ID: {job.job_id()}")
print(f">>> Job Status: {job.status()}")
```

```python
result = job.result()
print(f">>> {result}")
print(f"  > Expectation value: {result.values[0]}")
print(f"  > Metadata: {result.metadata[0]}")
```
  </TabItem>

  <TabItem value="EstimatorV1" label="Estimator (V1)">
    ```python
job = estimator.run(isa_circuit, isa_observable)
print(f">>> Job ID: {job.job_id()}")
print(f">>> Job Status: {job.status()}")
```

```python
result = job.result()
print(f">>> {result}")
print(f"  > Expectation value: {result.values[0]}")
print(f"  > Metadata: {result.metadata[0]}")
```
  </TabItem>
</Tabs>

<span id="start-sampler"></span>
## Get started with Sampler

### 1. Initialize the account

Because Qiskit Runtime `Sampler` is a managed service, you first need to initialize your account. You can then select the simulator or real system you want to use to calculate the expectation value.

Follow the steps in the [Install and set up topic](../start/install) if you don't already have an account set up.

```python
from qiskit_ibm_runtime import QiskitRuntimeService

service = QiskitRuntimeService()
backend = service.backend("ibm_brisbane")
```

### 2. Create a circuit

You need at least one circuit as the input to the `Sampler` primitive. 

<Tabs>
  <TabItem value="SamplerV2" label="SamplerV2">
    For SamplerV2, the circuit and optional paramater value sets are input as *primitive unified bloc* (PUB) tuples.

    NEED UPDATED CODE

    ```python
import numpy as np
from qiskit.circuit.library import IQP
from qiskit.transpiler.preset_passmanagers import generate_preset_pass_manager
from qiskit.quantum_info import random_hermitian

n_qubits = 127

mat = np.real(random_hermitian(n_qubits, seed=1234))
circuit = IQP(mat)
circuit.measure_all()
```

Again, we use the transpiler to get an ISA circuit.

```python
pm = generate_preset_pass_manager(backend=backend)
isa_circuit = pm.run(circuit)
```
  </TabItem>

  <TabItem value="SamplerV1" label="Sampler (V1)">
    ```python
import numpy as np
from qiskit.circuit.library import IQP
from qiskit.transpiler.preset_passmanagers import generate_preset_pass_manager
from qiskit.quantum_info import random_hermitian

n_qubits = 127

mat = np.real(random_hermitian(n_qubits, seed=1234))
circuit = IQP(mat)
circuit.measure_all()
```
Again, we use the transpiler to get an ISA circuit.

```python
pm = generate_preset_pass_manager(backend=backend)
isa_circuit = pm.run(circuit)
```
  </TabItem>
</Tabs>

### 3. Initialize the Qiskit Runtime Sampler

Here we are initializing an instance of `qiskit_ibm_runtime.Sampler` instead of `qiskit.primitives.Sampler` to use the Qiskit Runtime `Sampler`. 

When you initialize the `Sampler`, you need to pass in the simulator or system you previously selected as the target device (or simulator).  You could also do this within the `session` parameter. 



<Tabs>
  <TabItem value="SamplerV2" label="SamplerV2">
    ```python
from qiskit_ibm_runtime import SamplerV2 as Sampler

sampler = Sampler(backend=backend)
```
  </TabItem>

  <TabItem value="SamplerV1" label="Sampler (V1)">
    ```python
from qiskit_ibm_runtime import Sampler

sampler = Sampler(backend=backend)
```
  </TabItem>
</Tabs>


### 4. Invoke the Sampler and get results

Next, invoke the `run()` method to generate a quasi-probability distribution for the input circuits and quantum states.

<Tabs>
  <TabItem value="SamplerV2" label="SamplerV2">
  NEEDS TO BE UPDATED. 

  ```python
job = sampler.run(isa_circuit)
print(f">>> Job ID: {job.job_id()}")
print(f">>> Job Status: {job.status()}")
```
```python
result = job.result()
print(f">>> {result}")
print(f"  > Quasi-probability distribution: {result.quasi_dists[0]}")
print(f"  > Metadata: {result.metadata[0]}")
```
  </TabItem>

  <TabItem value="SamplerV1" label="Sampler (V1)">
    ```python
job = sampler.run(isa_circuit)
print(f">>> Job ID: {job.job_id()}")
print(f">>> Job Status: {job.status()}")
```
```python
result = job.result()
print(f">>> {result}")
print(f"  > Quasi-probability distribution: {result.quasi_dists[0]}")
print(f"  > Metadata: {result.metadata[0]}")
```
  </TabItem>
</Tabs>
## Next steps

<Admonition type="tip" title="Recommendations">
    - Review detailed [primitives examples.](primitives-examples)
    - Practice with primitives by working through the [Cost function lesson](https://learning.quantum.ibm.com/course/variational-algorithm-design/cost-functions#primitives) in IBM Quantum Learning.
    - Learn how to transpile locally in the [Transpile](../transpile/) section.
    - Try the [Submit pre-transpiled circuits](https://learning.quantum.ibm.com/tutorial/submitting-user-transpiled-circuits-using-primitives) tutorial.
</Admonition>
