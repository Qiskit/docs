---
title: Migrate from qiskit-ibm-provider
description: Migrate from backend.run in qiskit-ibm-provider to using Qiskit Runtime primitives

---

# Migrate from `qiskit_ibm_provider`

This topic shows how to migrate code that implemented `IBMBackend.run()`
by using `qiskit_ibm_provider` to use `qiskit_ibm_runtime`.

## Example: Basic execution

Change the import and run statements, instantiate the primitive, and make sure the input is modified to adhere to the backend's instruction set architecture (ISA).

<Tabs>
  <TabItem value="updated" label="Qiskit Runtime">
```python
from qiskit import QuantumCircuit
from qiskit_ibm_runtime import QiskitRuntimeService, SamplerV2 as Sampler
 
service = QiskitRuntimeService()
 
backend = service.least_busy(operational=True, simulator=False, min_num_qubits=127)
 
circuit = QuantumCircuit(2, 2)
circuit.h(0)
circuit.cx(0, 1)
circuit.measure_all()
 
pm = generate_preset_pass_manager(backend=backend, optimization_level=1)
isa_circuit = pm.run(circuit)
 
sampler = Sampler(backend)
job = sampler.run([(isa_circuit,)])
result = job.result()
print(f" > Counts: {result[0].data.meas.get_counts()}")
```
  </TabItem>

  <TabItem value="legacy" label="backend.run">
```python
from qiskit_ibm_provider import IBMProvider
from qiskit import *
from qiskit.compiler import transpile, assemble

circuit = QuantumCircuit(2, 2)
circuit.h(0)
circuit.cx(0, 1)
circuit.measure_all()

provider = IBMProvider()
backend = provider.get_backend("ibmq_qasm_simulator")
transpiled_circuit = transpile(circuit, backend=backend)
job = backend.run(transpiled_circuit)
print(f" > Counts: {job.result().get_counts()}")
```
  </TabItem>

</Tabs>


## Example: Use sessions

<Tabs>
  <TabItem value="Updated" label="Runtime primitives">
```python
from qiskit_ibm_runtime import Session

with Session(service=service, backend=backend) as session: 
    sampler = Sampler(session=session) 
    job = sampler.run([isa_circuit]) 
    another_job = sampler.run([another_isa_circuit]) 
    result = job.result()
    another_result = another_job.result()
```
  </TabItem>

  <TabItem value="Legacy" label="backend.run">
```python
with backend.open_session() as session:
    job = backend.run(transpiled_circuit)
    another_job = backend.run(transpiled_circuit)
    result = job.result()
    another_result = another_job.result()
```
  </TabItem>
</Tabs>